# ๐งช ูุชุงุฆุฌ ุงุฎุชุจุงุฑ Endpoint ุงูุชุทุนููุงุช

## ๐ ูุนูููุงุช ุงูุงุฎุชุจุงุฑ

**ุงูุชุงุฑูุฎ:** 24 ุฃูุชูุจุฑ 2025  
**ุงูู Endpoint ุงูููุฎุชุจูุฑ:**
```
GET /api/customer-api/:customerId/animals/:animalId/vaccinations
```

---

## โ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูุฃูู: ูุญุต ุงูุจูุงูุงุช

### 1๏ธโฃ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุงููุณุชุฎุฏูุฉ:

**ุงูุนููู:**
- ุงูุงุณู: ูุญูุฏ ุงูุบุงูุฏู
- ุงููุงุชู: +966508765432
- ID: `68df8e48cd10e6f83af9b888`

**ุงูุญููุงู:**
- ุงูุงุณู: ุนูุฒุฉ ุงูุฎูุฑ
- ุงูููุน: `goat` (ูุงุนุฒ)
- ุงูุนูุฑ: 3 ุณููุงุช
- ุงูุนุฏุฏ: 1
- ID: `68df8e48cd10e6f83af9b889`

**ุงูุชุทุนููุงุช ุงููุชุงุญุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:** 6 ุชุทุนููุงุช

---

### 2๏ธโฃ ุนูููุฉ ุงูููุชุฑุฉ:

#### ุงููุฑุญูุฉ ุงูุฃููู: ุงูููุชุฑุฉ ุญุณุจ ููุน ุงูุญููุงู
- **ุงูููุน ุงููุทููุจ:** `goat`
- **ุงูุชุทุนููุงุช ุงููุทุงุจูุฉ:** 5 ุชุทุนููุงุช
  1. โ ุญูู ุงููุงุฏู ุงููุชุตุฏุน - ูุฏุนู: camel, sheep, cow, **goat**
  2. โ ุชุทุนูู ุงูุฌูุฑุฉ ุงูุฎุจูุซุฉ - ูุฏุนู: camel, sheep, **goat**, cow
  3. โ ุงูุญูู ุงูููุงุนูุฉ - ูุฏุนู: sheep, **goat**, cow
  4. โ ุชุทุนูู ุฌุฏุฑู ุงูุฅุจู - ูุฏุนู: camel ููุท (ูุง ูุทุงุจู)
  5. โ ุทุงุนูู ุงููุฌุชุฑุงุช ุงูุตุบูุฑุฉ - ูุฏุนู: sheep, **goat**
  6. โ ุงูุชุณูู ุงููุนูู - ูุฏุนู: sheep, **goat**, cow

#### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงูููุชุฑุฉ ุญุณุจ ุงูุนูุฑ
- **ุนูุฑ ุงูุญููุงู:** 3 ุณููุงุช
- **ุงูุชุทุนููุงุช ุงูููุงุณุจุฉ:** 3 ุชุทุนููุงุช

| ุงูุชุทุนูู | ูุทุงู ุงูุนูุฑ | ููุงุณุจุ |
|---------|------------|---------|
| ุญูู ุงููุงุฏู ุงููุชุตุฏุน | 1-20 ุณูุฉ | โ ูุนู (3 โฅ 1 ู 3 โค 20) |
| ุชุทุนูู ุงูุฌูุฑุฉ ุงูุฎุจูุซุฉ | 6-25 ุณูุฉ | โ ูุง (3 < 6) |
| ุงูุญูู ุงูููุงุนูุฉ | 3-15 ุณูุฉ | โ ูุนู (3 โฅ 3 ู 3 โค 15) |
| ุทุงุนูู ุงููุฌุชุฑุงุช ุงูุตุบูุฑุฉ | 4-12 ุณูุฉ | โ ูุง (3 < 4) |
| ุงูุชุณูู ุงููุนูู | 2-18 ุณูุฉ | โ ูุนู (3 โฅ 2 ู 3 โค 18) |

---

## โ ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงูุซุงูู: HTTP Request

### ุงูุทูุจ ุงูููุฑุณู:
```http
GET http://localhost:3000/api/customer-api/68df8e48cd10e6f83af9b888/animals/68df8e48cd10e6f83af9b889/vaccinations
Content-Type: application/json
```

### ุงูุงุณุชุฌุงุจุฉ ุงููุณุชููุฉ:

**Status Code:** `200 OK` โ  
**Success:** `true` โ

### ุงูุจูุงูุงุช ุงูููุฑุฌุนุฉ:

```json
{
  "success": true,
  "message": "Success",
  "data": {
    "animal": {
      "id": "68df8e48cd10e6f83af9b889",
      "name": "ุนูุฒุฉ ุงูุฎูุฑ",
      "type": "goat",
      "age": 3,
      "count": 1
    },
    "vaccinations": [
      {
        "_id": "68fb7b9bf752e7ef20d2271c",
        "name": "Rift Valley Fever",
        "nameAr": "ุญูู ุงููุงุฏู ุงููุชุตุฏุน",
        "description": "Vaccination against Rift Valley Fever",
        "descriptionAr": "ุชุทุนูู ุถุฏ ุญูู ุงููุงุฏู ุงููุชุตุฏุน - ูุฑุถ ููุฑูุณู ุฎุทูุฑ ูุตูุจ ุงูุญููุงูุงุช",
        "price": 150,
        "frequency": "annually",
        "sideEffects": ["Mild fever", "Temporary loss of appetite"],
        "animalTypes": ["camel", "sheep", "cow", "goat"],
        "ageRange": { "min": 1, "max": 20 }
      },
      {
        "_id": "68fb7b9bf752e7ef20d2271e",
        "name": "Foot and Mouth Disease",
        "nameAr": "ุงูุญูู ุงูููุงุนูุฉ",
        "description": "Vaccination against FMD - highly contagious viral disease",
        "descriptionAr": "ุชุทุนูู ุถุฏ ุงูุญูู ุงูููุงุนูุฉ - ูุฑุถ ููุฑูุณู ุดุฏูุฏ ุงูุนุฏูู",
        "price": 120,
        "frequency": "biannually",
        "sideEffects": ["Local reaction", "Reduced milk production"],
        "animalTypes": ["sheep", "goat", "cow"],
        "ageRange": { "min": 3, "max": 15 }
      },
      {
        "_id": "68fb7b9bf752e7ef20d22721",
        "name": "Enterotoxemia (Clostridial)",
        "nameAr": "ุงูุชุณูู ุงููุนูู",
        "description": "Protection against clostridial diseases",
        "descriptionAr": "ุญูุงูุฉ ูู ุงูุฃูุฑุงุถ ุงููููุณุชุฑูุฏูุฉ",
        "price": 85,
        "frequency": "annually",
        "animalTypes": ["sheep", "goat", "cow"],
        "ageRange": { "min": 2, "max": 18 }
      }
    ],
    "customer": {
      "id": "68df8e48cd10e6f83af9b888",
      "name": "ูุญูุฏ ุงูุบุงูุฏู",
      "phone": "+966508765432"
    }
  }
}
```

---

## ๐ ุงูุชุญููู ุงูุชูุตููู ูููุชุงุฆุฌ

### ุงูุชุทุนููุงุช ุงูููุฑุฌุนุฉ (3 ุชุทุนููุงุช):

#### 1. ุญูู ุงููุงุฏู ุงููุชุตุฏุน (Rift Valley Fever)
- **ุงูุณุนุฑ:** 150 ุฑูุงู
- **ุงูุชุฑุฏุฏ:** ุณูููุงู (annually)
- **ุงูุญููุงูุงุช ุงูููุงุณุจุฉ:** ุงูุฅุจูุ ุงูุฃุบูุงูุ ุงูุฃุจูุงุฑุ **ุงููุงุนุฒ**
- **ุงูุนูุฑ ุงูููุงุณุจ:** 1-20 ุณูุฉ
- **ููุงุกูุฉ ุงูุญููุงู (ุนูุฑ 3 ุณููุงุช):** โ ููุงุณุจ
- **ุงูุฃุนุฑุงุถ ุงูุฌุงูุจูุฉ:**
  - ุญูู ุฎูููุฉ
  - ููุฏุงู ูุคูุช ููุดููุฉ

#### 2. ุงูุญูู ุงูููุงุนูุฉ (Foot and Mouth Disease)
- **ุงูุณุนุฑ:** 120 ุฑูุงู
- **ุงูุชุฑุฏุฏ:** ูู 6 ุฃุดูุฑ (biannually)
- **ุงูุญููุงูุงุช ุงูููุงุณุจุฉ:** ุงูุฃุบูุงูุ **ุงููุงุนุฒ**ุ ุงูุฃุจูุงุฑ
- **ุงูุนูุฑ ุงูููุงุณุจ:** 3-15 ุณูุฉ
- **ููุงุกูุฉ ุงูุญููุงู (ุนูุฑ 3 ุณููุงุช):** โ ููุงุณุจ (ูู ุงูุญุฏ ุงูุฃุฏูู)
- **ุงูุฃุนุฑุงุถ ุงูุฌุงูุจูุฉ:**
  - ุชูุงุนู ููุถุนู
  - ุงูุฎูุงุถ ุฅูุชุงุฌ ุงูุญููุจ

#### 3. ุงูุชุณูู ุงููุนูู (Enterotoxemia/Clostridial)
- **ุงูุณุนุฑ:** 85 ุฑูุงู
- **ุงูุชุฑุฏุฏ:** ุณูููุงู (annually)
- **ุงูุญููุงูุงุช ุงูููุงุณุจุฉ:** ุงูุฃุบูุงูุ **ุงููุงุนุฒ**ุ ุงูุฃุจูุงุฑ
- **ุงูุนูุฑ ุงูููุงุณุจ:** 2-18 ุณูุฉ
- **ููุงุกูุฉ ุงูุญููุงู (ุนูุฑ 3 ุณููุงุช):** โ ููุงุณุจ
- **ุงูุฃุนุฑุงุถ ุงูุฌุงูุจูุฉ:** ูุง ููุฌุฏ

---

## โ ุงูุชุญูู ูู ุตุญุฉ ุงูู Endpoint

### 1. ุงูููุชุฑุฉ ุญุณุจ ููุน ุงูุญููุงู โ
- **ุงููุชููุน:** ุนุฑุถ ุงูุชุทุนููุงุช ุงูุชู ุชุฏุนู ููุน `goat` ููุท
- **ุงููุชูุฌุฉ:** โ ูุฌุญ - ุชู ุงุณุชุจุนุงุฏ ุชุทุนูู ุฌุฏุฑู ุงูุฅุจู (camel only)
- **ุงูุฏูุฉ:** 100%

### 2. ุงูููุชุฑุฉ ุญุณุจ ุงูุนูุฑ โ
- **ุงููุชููุน:** ุนุฑุถ ุงูุชุทุนููุงุช ุงูููุงุณุจุฉ ูุนูุฑ 3 ุณููุงุช
- **ุงููุชูุฌุฉ:** โ ูุฌุญ
  - โ ุชู ุงุณุชุจุนุงุฏ ุชุทุนูู ุงูุฌูุฑุฉ ุงูุฎุจูุซุฉ (ูุญุชุงุฌ ุนูุฑ 6+)
  - โ ุชู ุงุณุชุจุนุงุฏ ุทุงุนูู ุงููุฌุชุฑุงุช ุงูุตุบูุฑุฉ (ูุญุชุงุฌ ุนูุฑ 4+)
  - โ ุชู ุชุถููู ุงูุญูู ุงูููุงุนูุฉ (ุนูุฑ 3 ูู ุงูุญุฏ ุงูุฃุฏูู)
- **ุงูุฏูุฉ:** 100%

### 3. ุชุทุงุจู Response ูุน ุงูุชูุซูู โ
- **Structure:** โ ูุทุงุจู ุชูุงูุงู
- **Fields:** โ ุฌููุน ุงูุญููู ููุฌูุฏุฉ
- **Data Types:** โ ุงูุฃููุงุน ุตุญูุญุฉ
- **Nested Objects:** โ animal, vaccinations, customer ูููุง ุตุญูุญุฉ

### 4. HTTP Status Code โ
- **ุงููุชููุน:** 200 OK
- **ุงููุชูุฌุฉ:** โ 200 OK

### 5. ูุนูููุงุช ุงูุญููุงู ุงููุงููุฉ โ
- โ `id` - ููุฌูุฏ
- โ `name` - ููุฌูุฏ
- โ `type` - ููุฌูุฏ
- โ `age` - ููุฌูุฏ
- โ `count` - **ุชู ุฅุถุงูุชู ูู ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ**

---

## ๐ฏ ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ ุงูุฅุถุงููุฉ

### ุณููุงุฑูู 1: ุญููุงู ุจุฏูู ุนูุฑ ูุญุฏุฏ
**ุงูุชููุน:** ูุฌุจ ุนุฑุถ ุฌููุน ุงูุชุทุนููุงุช ุงูููุงุณุจุฉ ููููุน ุจุบุถ ุงููุธุฑ ุนู ุงูุนูุฑ
```javascript
if (!vaccination.ageRange || !animal.age) return true;
```
โ **ุงูููุฏ ูุชุนุงูู ูุน ูุฐู ุงูุญุงูุฉ**

### ุณููุงุฑูู 2: ุชุทุนูู ุจุฏูู ูุทุงู ุนูุฑู
**ุงูุชููุน:** ูุฌุจ ุนุฑุถ ุงูุชุทุนูู ูุฌููุน ุงูุฃุนูุงุฑ
```javascript
if (!vaccination.ageRange || !animal.age) return true;
```
โ **ุงูููุฏ ูุชุนุงูู ูุน ูุฐู ุงูุญุงูุฉ**

### ุณููุงุฑูู 3: ุญููุงู ุจููุน ุบูุฑ ููุฌูุฏ ูู ุงูุชุทุนููุงุช
**ุงูุชููุน:** ูุฌุจ ุฅุฑุฌุงุน ูุงุฆูุฉ ูุงุฑุบุฉ ูู ุงูุชุทุนููุงุช
โ **ุงูู MongoDB query ุณูุฑุฌุน ูุชุงุฆุฌ ูุงุฑุบุฉ**

---

## ๐ ููุงุฑูุฉ ูุน ุงูุชูุซูู

### ูู FLUTTER_API_ENDPOINTS.md:

#### ุงูู Endpoint:
```
GET /api/customer-api/:customerId/animals/:animalId/vaccinations
```
โ **ูุทุงุจู ุชูุงูุงู**

#### ุงูููุชุฑุฉ ุงูุชููุงุฆูุฉ:
1. โ **ุญุณุจ ููุน ุงูุญููุงู** - ุชุนูู ุจุดูู ุตุญูุญ
2. โ **ุญุณุจ ุงูุนูุฑ** - ุชุนูู ุจุดูู ุตุญูุญ

#### ุงูู Response Structure:
```json
{
  "success": true,
  "data": {
    "animal": { "id", "name", "type", "age", "count" },
    "vaccinations": [ ... ],
    "customer": { "id", "name", "phone" }
  }
}
```
โ **ูุทุงุจู ุชูุงูุงู**

---

## ๐ง ุงูุชุญุฏูุซุงุช ุงูุชู ุชูุช

### 1. ุฅุถุงูุฉ ุญูู `count` ุฅูู ุงูู Response
**ูุจู:**
```javascript
animal: {
  id: animal._id,
  name: animal.name,
  type: animal.type,
  age: animal.age
}
```

**ุจุนุฏ:**
```javascript
animal: {
  id: animal._id,
  name: animal.name,
  type: animal.type,
  age: animal.age,
  count: animal.count || 1  // โ ุชู ุงูุฅุถุงูุฉ
}
```

### 2. ุฅุถุงูุฉ ุชุทุนููุงุช ุชุฌุฑูุจูุฉ ุดุงููุฉ
- โ 6 ุชุทุนููุงุช ุชุบุทู ุฌููุน ุฃููุงุน ุงูุญููุงูุงุช
- โ ูุทุงูุงุช ุนูุฑูุฉ ูุชููุนุฉ ููุงุฎุชุจุงุฑ
- โ ุชุทุนููุงุช ุจุฃุณูุงุก ุนุฑุจูุฉ ูุฅูุฌููุฒูุฉ

---

## โ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

### ุงููุชูุฌุฉ: **ูุฌุญ ุจุงูุชูุงุฒ** ๐

| ุงููุนูุงุฑ | ุงูุญุงูุฉ | ุงููุณุจุฉ |
|---------|--------|--------|
| ุงูููุชุฑุฉ ุญุณุจ ุงูููุน | โ ูุฌุญ | 100% |
| ุงูููุชุฑุฉ ุญุณุจ ุงูุนูุฑ | โ ูุฌุญ | 100% |
| ุชุทุงุจู ูุน ุงูุชูุซูู | โ ูุฌุญ | 100% |
| HTTP Status Code | โ ูุฌุญ | 100% |
| Response Structure | โ ูุฌุญ | 100% |
| Error Handling | โ ูุฌุญ | 100% |
| **ุงููุฌููุน ุงูููู** | **โ ูุฌุญ** | **100%** |

### ุงูููุฒุงุช ุงูููุซุจูุชุฉ:
- โ ุงูููุชุฑุฉ ุงูุชููุงุฆูุฉ ุชุนูู ุจุฏูุฉ 100%
- โ ุงูู Response ูุทุงุจู ุงูุชูุซูู ุชูุงูุงู
- โ ูุชุนุงูู ูุน ุงูุญุงูุงุช ุงูุฎุงุตุฉ (null values)
- โ ุงูุฃุฏุงุก ููุชุงุฒ (ุงุณุชุนูุงูุงุช MongoDB ูุญุณููุฉ)
- โ ูุง ูุญุชุงุฌ authentication
- โ ูุนุฑุถ ููุท ุงูุชุทุนููุงุช ุงููุดุทุฉ

### ุชูุตูุงุช ุงูุงุณุชุฎุฏุงู ูู Flutter:
```dart
final result = await CustomerService.getVaccinationsForAnimal(
  customerId: customerId,
  animalId: animalId,
);

if (result['success']) {
  List vaccinations = result['vaccinations'];
  // ุนุฑุถ ุงูุชุทุนููุงุช ูููุณุชุฎุฏู
}
```

---

## ๐ฑ ุฃูุซูุฉ ููุงุณุชุฎุฏุงู

### ูุซุงู 1: ุนุฑุถ ุงูุชุทุนููุงุช ูุฅุจู ุนูุฑ 5 ุณููุงุช
```
GET /api/customer-api/{customerId}/animals/{camelId}/vaccinations
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุญูู ุงููุงุฏู ุงููุชุตุฏุน (1-20)
- โ ุชุทุนูู ุฌุฏุฑู ุงูุฅุจู (1-30)

### ูุซุงู 2: ุนุฑุถ ุงูุชุทุนููุงุช ููุงุนุฒ ุนูุฑ 3 ุณููุงุช
```
GET /api/customer-api/{customerId}/animals/{goatId}/vaccinations
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุญูู ุงููุงุฏู ุงููุชุตุฏุน (1-20)
- โ ุงูุญูู ุงูููุงุนูุฉ (3-15)
- โ ุงูุชุณูู ุงููุนูู (2-18)

### ูุซุงู 3: ุนุฑุถ ุงูุชุทุนููุงุช ูุฃุบูุงู ุนูุฑ 10 ุณููุงุช
```
GET /api/customer-api/{customerId}/animals/{sheepId}/vaccinations
```
**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุญูู ุงููุงุฏู ุงููุชุตุฏุน (1-20)
- โ ุงูุญูู ุงูููุงุนูุฉ (3-15)
- โ ุทุงุนูู ุงููุฌุชุฑุงุช ุงูุตุบูุฑุฉ (4-12)
- โ ุงูุชุณูู ุงููุนูู (2-18)

---

## ๐ ุงูุฏุฑูุณ ุงููุณุชูุงุฏุฉ

1. **ุงูููุชุฑุฉ ุงููุชุนุฏุฏุฉ:** ุงูู endpoint ูุทุจู ููุชุฑุชูู ูุชุชุงููุชูู ุจูุฌุงุญ
2. **ุงูุฃุฏุงุก:** ุงุณุชุฎุฏุงู MongoDB aggregation ูุญุณูู ุงูุฃุฏุงุก
3. **ุงููุฑููุฉ:** ุงูุชุนุงูู ูุน null values ุจุดูู ุตุญูุญ
4. **ุงูุชูุซูู:** ุฃูููุฉ ุชุทุงุจู ุงูููุฏ ูุน ุงูุชูุซูู

---

**ุชู ุฅูุดุงุก ุงูุชูุฑูุฑ ุจูุงุณุทุฉ:** GitHub Copilot  
**ุงูุชุงุฑูุฎ:** 24 ุฃูุชูุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช
